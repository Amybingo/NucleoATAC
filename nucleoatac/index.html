<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>nucleoatac - NucleoATAC</title>
  

  <link rel="shortcut icon" href="../img/favicon.ico">

  
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="../css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../css/theme_extra.css" type="text/css" />
  <link rel="stylesheet" href="../css/highlight.css">

  <script src="../js/jquery-2.1.1.min.js"></script>
  <script src="../js/modernizr-2.8.3.min.js"></script>
  <script type="text/javascript" src="../js/highlight.pack.js"></script>
  <script src="../js/theme.js"></script> 

  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
      <div class="wy-side-nav-search">
        <a href=".." class="icon icon-home"> NucleoATAC</a>
        
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
      <ul class="current">
    
        
            <li class="toctree-l1 ">
                <a class="" href="..">Home</a>
                
            </li>
        

    
        
            <li class="toctree-l1 ">
                <a class="" href="../installation/">Installation</a>
                
            </li>
        

    
        
            <li class="toctree-l1 current">
                <a class="current" href="./">nucleoatac</a>
                
                    <ul>
                    
                        <li class="toctree-l3"><a href="#necessary-files">Necessary Files</a></li>
                        
                    
                        <li class="toctree-l3"><a href="#run">run</a></li>
                        
                    
                        <li class="toctree-l3"><a href="#occ">occ</a></li>
                        
                    
                        <li class="toctree-l3"><a href="#vprocess">vprocess</a></li>
                        
                    
                        <li class="toctree-l3"><a href="#nuc">nuc</a></li>
                        
                    
                    </ul>
                
            </li>
        

    
        
            <li class="toctree-l1 ">
                <a class="" href="../pyatac/">pyatac</a>
                
            </li>
        

    
        
            <li class="toctree-l1 ">
                <a class="" href="../faq/">FAQ</a>
                
            </li>
        

    
</ul>

      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="..">NucleoATAC</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="..">Docs</a> &raquo;</li>
    
    <li>nucleoatac</li>
      <li class="wy-breadcrumbs-aside">
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            <div class="section">
              <p>The nucleoatac command line function contains several subcommands used for calling nucleosomes.  The "run" subcommand is a wrapper for the other three using standard options-- for more flexibility, run "occ" then "vprocess" then "nuc". For each subcommand, options can be viewed as <code>nucleoatac subcommand --help</code>.</p>
<h3 id="necessary-files">Necessary Files</h3>
<p>Prior to using nucleoatac to call nucleosomes, you will need at least three types of files:</p>
<p>1) Bam file with aligned reads.  These generally will be filtered for reads not mapping to mitochondria &amp; reads with high mapping quality.</p>
<p>2) Fasta file with genome used in alignment.  This file must be indexed (using <a href="http://www.htslib.org/">samtools</a> faidx)</p>
<p>3) Sorted bed file with regions for which nucleosome analysis is to be performed.  These regions will generally be broad open-chromatin regions (i.e. regions called by MACS2 with the --broad flag).  It is potentially advisable to extend these regions a bit (e.g. using bedtools slop).  Regions should not overlap so it is advisable to use bedtools merge on these regions.</p>
<h3 id="run">run</h3>
<p>For calling nucleosomes with mostly default parameters, use</p>
<pre><code>nucleoatac run --bed &lt;bedfile&gt; --bam &lt;bamfile&gt; --fasta &lt;fastafile&gt; --out &lt;output_basename&gt;
</code></pre>

<p>Outputs:</p>
<p>See outputs for occ, vprocess, and nuc</p>
<h3 id="occ">occ</h3>
<pre><code>nucleoatac occ --bed &lt;bedfile&gt; --bam &lt;bamfile&gt; --out &lt;output_basename&gt;

</code></pre>

<p>Outputs:</p>
<ul>
<li>
<p><em>output_basename.occ.bedgraph.gz</em>: Bedgraph track with nucleosome occupancy score</p>
</li>
<li>
<p><em>output_basename.nuc_dist.txt</em> and <em>output_basename.nuc_dist.eps</em>: text file and EPS plot with estimate of fragment size at nucleosomes</p>
</li>
<li>
<p><em>output_basename.fragmentsizes.txt</em>: Text file with fragment size distribution within input peaks</p>
</li>
<li>
<p><em>output_basename.occ_fit.txt</em> and <em>output_basename.occ_fit.eps</em>: text file and EPS plot of model for NFR and nucleosomal distributions</p>
</li>
</ul>
<h3 id="vprocess">vprocess</h3>
<pre><code>nucleoatac vprocess --sizes &lt;sizes_file&gt; --out &lt;output_basename&gt;
</code></pre>

<p>The <sizes_file> will generally be the output_basename.nuc_dist.txt output from <code>occ</code>.  </p>
<p>Outputs:</p>
<ul>
<li><em>output_basename.VMat</em>: text file with normalized V-plot for cross-correlation</li>
</ul>
<h3 id="nuc">nuc</h3>
<pre><code>nucleotac nuc
</code></pre>

<ul>
<li>
<p><em>output_basename.nucpos.bed</em>:  Nucleosome dyad calls text file.  Columns are: (1) chrom, (2) dyad position (0-based), (3) dyad position(1-based), (4) z-score, (5) nucleosome occupancy estimate (6) log likelihood ratio, (7) normalied nucleoatac signal value, (8) smoothed nucleoatac signal value, (9) cross-correlation signal value before normalization, (10) number of potentially nucleosome-sized fragments, (11) number of fragments smaller than nucleosome sized, (12) "fuzziness"  (measure of how wide signal peak is)</p>
</li>
<li>
<p><em>output_basename.nucpos.redundant.bed</em>: Includes nucleosome position calls that were within the minimum separation for non-redundant calls. </p>
</li>
<li>
<p><em>output_basename.nucleoatac_signal.bedgraph.gz</em>: Bedgraph track with normalized cross-correlation signal</p>
</li>
<li>
<p><em>output_basename.nucleoatac_signal.smooth.bedgraph.gz</em>: Smoothed version of output_basename.nucleoatac_signal.bedgraph.gz
Also includes only positive signal</p>
</li>
<li>
<p><em>output_basename.occ.bedgraph.gz</em>: Bedgraph track with nucleosome occupancy score</p>
</li>
</ul>
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../pyatac/" class="btn btn-neutral float-right" title="pyatac"/>Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../installation/" class="btn btn-neutral" title="Installation"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
    <!-- Copyright etc -->
    </p>
  </div>

  Built with <a href="http://www.mkdocs.org">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
	  
        </div>
      </div>

    </section>

  </div>

<div class="rst-versions" role="note" style="cursor: pointer">
    <span class="rst-current-version" data-toggle="rst-current-version">
        
      <span><a href="../installation/" style="color: #fcfcfc;">&laquo; Previous</a></span>
      <span style="margin-left: 15px"><a href="../pyatac/" style="color: #fcfcfc">Next &raquo;</a></span>
    </span>
</div>

<!--
MkDocs version  : 0.12.1
Docs Build Date : 2015-04-27 18:48:14.984733
-->
</body>
</html>